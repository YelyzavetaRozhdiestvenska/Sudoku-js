function t(t){return{row:Math.floor(t/9),column:t%9}}function n(t,n){return 9*t+n}function o(){const t=new Array(9).fill().map((()=>new Array(9).fill(null)));return e(t),function(t){const n=30,o=[...t].map((t=>[...t]));let e=0;for(;e<n;){let t=Math.floor(9*Math.random()),n=Math.floor(9*Math.random());null!==o[t][n]&&(o[t][n]=null,e++)}return o}(t)}function e(t){const n=r(t);if(!n)return!0;const o=function(){const t=[1,2,3,4,5,6,7,8,9];for(let n=t.length-1;n>=0;n--){const o=Math.floor(Math.random()*(n+1));[t[n],t[o]]=[t[o],t[n]]}return t}();for(let r=0;r<o.length;r++)if(l(t,n.row,n.column,o[r])){if(t[n.row][n.column]=o[r],e(t))return!0;t[n.row][n.column]=null}}function r(t){for(let n=0;n<9;n++)for(let o=0;o<9;o++)if(null===t[n][o])return{row:n,column:o};return null}function l(t,n,o,e){return function(t,n,o,e){for(let r=0;r<9;r++)if(t[r][o]===e&&r!==n)return!1;return!0}(t,n,o,e)&&function(t,n,o,e){for(let r=0;r<9;r++)if(t[n][r]===e&&r!==o)return!1;return!0}(t,n,o,e)&&function(t,n,o,e){const r=n-n%3,l=o-o%3;for(let s=r;s<r+3;s++)for(let r=l;r<l+3;r++)if(t[s][r]===e&&s!==n&&r!==o)return!1;return!0}(t,n,o,e)}const s=new class{getDuplicatePositions(t,n,o){const e=this.getDuplicatePositionsInColumn(t,n,o),r=this.getDuplicatePositionsInRow(t,n,o),l=this.getDuplicatePositionsInBox(t,n,o),s=[...e,...r];return l.forEach((o=>{o.row!==t&&o.column!==n&&s.push(o)})),s}getDuplicatePositionsInColumn(t,n,o){const e=[];for(let r=0;r<9;r++)this.grid[r][n]===o&&r!==t&&e.push({row:r,column:n});return e}getDuplicatePositionsInRow(t,n,o){const e=[];for(let r=0;r<9;r++)this.grid[t][r]===o&&r!==n&&e.push({row:t,column:r});return e}getDuplicatePositionsInBox(t,n,o){const e=[],r=t-t%3,l=n-n%3;for(let s=r;s<r+3;s++)for(let r=l;r<l+3;r++)this.grid[s][r]===o&&s!==t&&r!==n&&e.push({row:s,column:r});return e}hasEmptyCells(){return Boolean(r(this.grid))}constructor(){this.grid=o()}};let i,c,u;function a(o){u&&(u.classList.contains("filled")||(i.forEach((t=>t.classList.remove("error","zoom","shake","selected"))),u.classList.add("selected"),function(o){const{row:e,column:r}=t(c),l=s.getDuplicatePositions(e,r,o);if(l.length)return void function(t){t.forEach((t=>{const o=n(t.row,t.column);setTimeout((()=>i[o].classList.add("error","shake")),0)}))}(l);s.grid[e][r]=o,u.innerHTML=o,setTimeout((()=>u.classList.add("zoom")),0)}(o),s.hasEmptyCells()||setTimeout((()=>winAnimation()),500)))}function f(){if(!u)return;if(u.classList.contains("filled"))return;i.forEach((t=>t.classList.remove("error","zoom","shake","selected"))),u.classList.add("selected");const{row:n,column:o}=t(c);u.innerHTML="",s.grid[n][o]=null}i=document.querySelectorAll(".cell"),function(){for(let n=0;n<81;n++){const{row:o,column:e}=t(n);null!==s.grid[o][e]&&(i[n].classList.add("filled"),i[n].innerHTML=s.grid[o][e])}}(),i.forEach(((t,o)=>{t.addEventListener("click",(()=>function(t,o){i.forEach((t=>t.classList.remove("highlighted","selected","error"))),t.classList.contains("filled")?(c=null,u=null):(c=o,u=t,t.classList.add("selected"),function(t){(function(t){const o=t%9;for(let t=0;t<9;t++){const e=n(t,o);i[e].classList.add("highlighted")}})(t),function(t){const o=Math.floor(t/9);for(let t=0;t<9;t++){const e=n(o,t);i[e].classList.add("highlighted")}}(t),function(t){const o=t%9,e=Math.floor(t/9),r=e-e%3,l=o-o%3;for(let t=r;t<r+3;t++)for(let o=l;o<l+3;o++){const e=n(t,o);i[e].classList.add("highlighted")}}(t)}(o)),""!==t.innerHTML&&i.forEach((n=>{n.innerHTML===t.innerHTML&&n.classList.add("selected")}))}(t,o)))})),document.querySelectorAll(".number").forEach((t=>{t.addEventListener("click",(()=>a(parseInt(t.innerHTML))))})),document.querySelector(".remove").addEventListener("click",(()=>f())),document.addEventListener("keydown",(t=>{"Backspace"===t.key?f():t.key>="1"&&t.key<="9"&&a(parseInt(t.key))}));
//# sourceMappingURL=index.abf631a1.js.map
